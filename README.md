# SectionTool

SectionTool is a Plugin for Epic Games' Unreal Engine 4. It allows creating, displaying, and controlling section cuts through meshes in scenes.

SectionTool can also be used together with Vitruvio Plugin and WREN Plugin to make sections through the buildings generated by the plugins.

This is part of Virtual Places VR Research Project at Cornell University for Henry Richardson.

- [Getting Started](#Getting-Started)
  - [Prerequisites](#Prerequisites)
  - [Installation](#Installation)
- [Using the SectionTool Plugin](#Using-the-SectionTool-Plugin)
  - [Clipping Plane Materials](#Clipping-Plane-Materials)
  - [The Clipping Plane](#The-Clipping-Plane)
  - [The UMG](#The-UMG)
- [Section Tool with WREN/Vitruvio Plugins](#Section-Tool-with-WRENVitruvio-Plugins)
  - [WREN](#WREN)
  - [Vitruvio](#Vitruvio)
  
## Getting Started

### Prerequisites

* Unreal Engine 4.22, 4.24, or 4.25
* The WREN Plugin or Vitruvio plugin if you want to use SectionTool with WREN/Vitruvio

### Installation

1. Download the SectionTool by clicking on "Clone or download" then "Download ZIP"
2. Create a new Unreal Engine project if you do not have one
3. Using the Windows File Explorer, navigate to your project folder
  * Create a folder named Plugins
  * Unzip the SectionTool and place it under the folder Plugins
4. Restart the Unreal Editor. Click on yes when asked to rebuild the SectionTool module
5. In Content Browser, click on View Options and select Show Plugin Content

## Using the SectionTool Plugin

### Clipping Plane Materials

To use the SectionTool you need to apply Clipping Plane materials to the meshes you want the Clipping plane to cut through.

* Go to the Materials folder under the Content folder of SectionTool
* There are three pre-made materials that you can edit directly, create material instance of, or dupplicate
  * M_1S_ClippingPlane
    
    This is a one-sided opaque material where you can add custom Base Color, Metallic, Specular, etc.
    
    The Edge formed by the intersection between the Clipping Plane and scene meshes can also be customized by changing Edge Thickness and Edge Color.
    
    The inside color (Color of the backside of the surfaces) can be changed.
  
  * M_1S_ClippingPlaneTranslucent
  
    This is a translucent material similar to the material above. You can customize its Base Color and Edge properties, as well as the Opacity. 
  
  * M_2S_ClippingPlane
  
    This is a two-sided opaque material. It is similar to M_1S_ClippingPlane but with additional control over the Metallic, Specular, and Roughness of the back side of the surfaces.
    
* Apply the materials to meshes you want to cut through
* The meshes might look transparent when materials are applied. Simply dragging a BP_ClippingPlane into the level and moving it around can solve it.

### The Clipping Plane

BP_ClippingPlane is the actor in folder ClippingPlane that do the cutting. 

* Once Clipping Plane Materials are applied, drag the actor to the level. The section can then be generated automatically.
* You can add your own "Clipping Plane Mesh" by openning BP_ClippingPlane with Blueprint Editor, clicking on ThePlaneMesh in Components, then editing this mesh in Details tab.
* You can also add other functionalities such as VR grabbing directly to this actor.

### The UMG

There is a pre-built UMG system where you can control the Clipping Plane with buttons.

* Delete BP_ClippingPlane actor in the level if you placed one in
* Drag the BP_ClippingPlaneVolume into the level
  * Select it in the level and go to the Details tab
  * Select SphereVolume Under Root and adjust its scale, select BP_ClippingPlaneVolume(Self) and adjust its location until the SphereVolume captures all elements you want to cut through in your level
  * Select this actor again and in Details tab, change Auto Spawn UMG to be true
* Now when play, a mini axon of the area you captured with SphereVolume should be generated on the upper right corner of your screen. There are sliders to adjust the perspective of the axon, and a button to spawn/clear clipping plane. When a clipping plane is spawned, sliders for controlling should appear right below the mini map. 

## Section Tool with WREN/Vitruvio Plugins

### WREN
* Make sure RPTPluginR3 is installed
* In folder SectionTool Content -> WREN_Vitruvio -> Wren, find RPTMaterial
* Copy it and replace the RPTMaterial under RPTPluginR3 Content folder
* Now all the generated buildings can receive section cut

### Vitruvio
* Make sure Vitruvio is installed
* In folder SectionTool Content -> WREN_Vitruvio -> Vitruvio, find M_RPT_Master
* Copy it and replace the M_RPT_Master under Vitruvio Content folder
* Now all the generated buildings can receive section cut